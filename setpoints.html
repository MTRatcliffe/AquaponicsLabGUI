<!DOCTYPE html>
<head>
  <!-- GNU Info
        ================================================== 
    This file is part of the Open Source ESP8266 Bases Valve controller.

    Free software: you can redistribute it and/or modify
    it under the terms of the GNU General Public License as published by
    the Free Software Foundation, either version 3 of the License, or
    (at your option) any later version.

    This is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
    GNU General Public License for more details.

    You should have received a copy of the GNU General Public License
    along with Open Source pH controller.  If not, see <http://www.gnu.org/licenses/>.

Code and comments provided by Michael Ratcliffe in partnership with AquaponicsLAb.org 
For More information see:
http://MichaelRatcliffe.com
http://AquaponicsLab.org

 ================================================== -->


  <!-- Basic Page Needs
        ================================================== -->
 	<meta charset="utf-8">
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
        <link rel="icon" type="image/png" href="img/fish.png">
        <title>AquaponicsLab</title>
        <meta name="description" content="Michael Ratcliffe">
        <meta name="keywords" content="Michael Ratcliffe">
        <meta name="author" content="Michael Ratcliffe">

<!-- Mobile Specific Metas
        ================================================== -->
	<meta name='viewport' content='width=device-width, initial-scale=1.0'>

<!-- Template CSS Files
        ================================================== -->
	<link rel='stylesheet' href='css/bootstrap.min.css'>
     
<!-- jQuery -->
 <script src="js/jquery.js"></script>
<!-- javascript
================================================== -->

<!-- This is the stuff for the nob inputs -->
<script src="js/jquery.knob.min.js"></script>
 <script type="text/javascript">
      $(document).ready(function() {   

      $('.knob').knob();
      });
    </script>
    <!-- Bootstrap Core JavaScript -->
    <script src="js/bootstrap.min.js"></script>
<!--

       ==================================================
        WebSockets Code [Lets us change variables]
        ================================================== -->
<script>
var connection = new WebSocket('ws://'+location.hostname+':81/', ['arduino']);

connection.onopen = function () { 
 connection.send('Connect ' + new Date()); 
 connection.send("#ConnectedSetPoints#");
};

connection.onerror = function (error) { 
console.log('WebSocket Error ', error);
};

connection.onmessage = function(e) { 
 console.log('Server: ', e.data);
			 if(e.data === "ChangedSetPoints" ){
			    alert("SetPoints Updated ");
			}
			if(e.data.startsWith("#V1#")){
			document.getElementById("v1").value = e.data.substring(4);
			
			}
			if(e.data.startsWith("#V2#")){
			document.getElementById("v2").value = e.data.substring(4);
			}
			if(e.data.startsWith("#V3#")){
			document.getElementById("v3").value = e.data.substring(4);
			}   

 
};

//Sending all Three SetPoints one after another
function UpdateSetpoints(){
    var v1 =document.getElementById('v1').value
    var v2 =document.getElementById('v2').value
    var v3 =document.getElementById('v3').value
    connection.send("#Setpoint1#"+v1); 
    connection.send("#Setpoint2#"+v2); 
    connection.send("#Setpoint3#"+v3);     
    };



</script>
<!--
        ==================================================
        Header Section Start
        ================================================== -->
</head>
<body  style='background-color: #000;'>
<div class='container'>
<div class='row'>
<div class='col-xs-12 col-md-12 col-lg-12' style='text-align: center;'>
<h1><p class="text-warning">Valve Control Made Easy</p></h1>
</div>
</div>

<!--
        ==================================================
        Second title Settings
        ================================================== -->
<div class='row'>
<div class='col-md-12' style='text-align: center;'>
<h2>
</i> Home </i>
</h2>
</div>
</div>

<!--
        ==================================================
        Main Image
        ================================================== 
<div class="text-xs-center">
<img class="img-responsive center-block" src="img/fish.png" alt="Michael Ratcliffe" height='330px' width='330px'> 
</div>
-->

<!--

    ==================================================
            Variables section foor Webosockets [where we change set points]
            ================================================== -->

<div class='col-md-12' style='text-align: center;'>
BED Timing Control:<br/>
<br/>
</div>


<div class="row">


       <div class="col-md-3 "> <center> <br/>
	</div>

            <div class="col-md-2 "> <center> <br/>
		Pressure Time 
		<br/>
              <input type="text" id="v1" class="input-small knob" value="41" data-min="0" data-max="100" data-width="160" data-height="160" data-thickness=".2" data-fgColor="#4d4dff" data-displayPrevious="true" data-angleArc="250" data-angleOffset="-125" />
<br/>
[Seconds]
<br/>
            </div>
            <div class="col-md-2"> <center> <br/>
Bed Cycle Time 
<br/>
              <input type="text" id="v2" class="input-small knob" value="41" data-min="0" data-max="100" data-width="160" data-height="160" data-thickness=".2" data-fgColor="#4d4dff" data-displayPrevious="true" data-angleArc="250" data-angleOffset="-125" />
<br/>

[Minutes]
<br/>
            </div>

            <div class="col-md-2" > <center> <br/>
		
		Release  Time
		<br/>
              <input type="text" id="v3" class="input-small knob" value="41" data-min="0" data-max="100" data-width="160" data-height="160" data-thickness=".2" data-fgColor="#4d4dff" data-displayPrevious="true" data-angleArc="250" data-angleOffset="-125" />
<br/>
		
		[Seconds]
<br/>
		   </div>

</div>

<!-- Button to commit changes, we only call the websockts function if this is called -->
<div class='row'>
<div class='col-md-12' style='text-align: center;'>
<br/>
<input type="button"  value="Commit Changes" onclick="UpdateSetpoints();">  
</div>
</div>
<!--
    ==================================================
            Bottom Buttons Section
            ================================================== -->
<center>
<br/>
<div class='btn-group' role='group' aria-label='MENU'>
<!--
    =============
            Home Button
            ================== -->
<a href='index.html' type='button' class='btn btn-md' style='background-color: #000; frameborder=1; border-color:#656565;'>Home </a>
<!--
    =============
            About Button
            ================== -->
<a href='about.html' type='button' class='btn btn-md' style='background-color: #000; frameborder=1; border-color:#656565;'>About </a>
<!--
    =============
            Wifi Settings
            ================== -->
<a href='wifi.html' type='button' class='btn btn-md' style='background-color: #000; frameborder=1; border-color:#656565;'>Wifi Setup </a>
<!--
    =============
            SetPoints
            ================== -->
<a href='setpoints.html' type='button' class='btn btn-md' style='background-color: #000; frameborder=1; border-color:#656565;'>Setpoints </a>
<!--
    =============
            Readings
            ================== -->
<a href='readings.html' type='button' class='btn btn-md' style='background-color: #000; frameborder=1; border-color:#656565;'>Readings </a>
<!--
    =============
           Logs
            ================== -->
<a href='Logs.html' type='button' class='btn btn-md' style='background-color: #000; frameborder=1; border-color:#656565;'>Logs </a>
<!--
    =============
            Updates
            ================== -->
<a href='updates.html' type='button' class='btn btn-md' style='background-color: #000; frameborder=1; border-color:#656565;'>Updates </a>
<!--
    ============================
            Closing Everything up
            ================================== -->
</div>
</center>
</div>
</div>
</div>
</div>






</div>
</center>
</div>
</div>
</div>
</div>
</body>
</html>
